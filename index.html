import React, { useState, useEffect, useCallback } from 'react';
import { motion, AnimatePresence } from 'framer-motion';

const RealisticBat = ({ size = 24, color = 'currentColor' }) => (
  <svg width={size} height={size} viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M24 4C22.8954 4 22 4.89543 22 6V8H26V6C26 4.89543 25.1046 4 24 4Z" fill={color}/>
    <path d="M20 8H28V12H20V8Z" fill={color}/>
    <path d="M16 12H32V16H16V12Z" fill={color}/>
    <path d="M12 16H36V20H12V16Z" fill={color}/>
    <path d="M8 20H40V24H8V20Z" fill={color}/>
    <path d="M4 24H44V28H4V24Z" fill={color}/>
    <path d="M8 28H40V32H8V28Z" fill={color}/>
    <path d="M12 32H36V36H12V32Z" fill={color}/>
    <path d="M16 36H32V40H16V36Z" fill={color}/>
    <path d="M20 40H28V44H20V40Z" fill={color}/>
    <path d="M22 44H26V46C26 47.1046 25.1046 48 24 48C22.8954 48 22 47.1046 22 46V44Z" fill={color}/>
    <animateTransform
      attributeName="transform"
      type="rotate"
      from="0 24 24"
      to="10 24 24"
      dur="0.5s"
      repeatCount="indefinite"
      values="0 24 24; 10 24 24; -10 24 24; 0 24 24"
      keyTimes="0; 0.33; 0.66; 1"
    />
  </svg>
);

const TypewriterText = ({ text, delay = 0, speed = 50, className = '', onComplete }) => {
  const [displayedText, setDisplayedText] = useState('');
  const [index, setIndex] = useState(0);

  useEffect(() => {
    const timer = setTimeout(() => {
      if (index < text.length) {
        setDisplayedText((prev) => prev + text[index]);
        setIndex((prev) => prev + 1);
      } else if (onComplete) {
        onComplete();
      }
    }, speed);

    return () => clearTimeout(timer);
  }, [index, text, speed, onComplete]);

  useEffect(() => {
    const startTimer = setTimeout(() => {
      setIndex(0);
      setDisplayedText('');
    }, delay);

    return () => clearTimeout(startTimer);
  }, [delay]);

  return <span className={className}>{displayedText}</span>;
};

const QuillPen = ({ isWriting, x, y }) => {
  if (!isWriting) return null;

  return (
    <motion.div
      className="absolute z-20"
      style={{ left: x, top: y }}
      animate={{
        x: [0, 200, 400, 600],
        y: [0, -5, 5, 0],
        rotate: [0, 5, -5, 0],
      }}
      transition={{ duration: 4, repeat: Infinity, ease: 'linear' }}
    >
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 1L3 10V12H5V20H19V12H21V10L12 1ZM17 18H7V14H17V18ZM17 12H7V10.12L12 5.12L17 10.12V12Z" fill="#d4af37"/>
      </svg>
    </motion.div>
  );
};

interface TelegramWebApp {
  expand: () => void;
  initDataUnsafe?: {
    user?: {
      id: number;
      username?: string;
      first_name?: string;
      last_name?: string;
    };
  };
  openLink: (url: string) => void;
  showPopup?: (params: any) => void;
}

interface CarouselSlide {
  href: string;
  image: string;
  alt: string;
}

interface ActualItem {
  id: string;
  href: string;
  image: string;
  title: string;
  description: string;
}

interface TeamMember {
  name: string;
  role: string;
  image: string;
  telegram: string;
}

interface VacancyData {
  title: string;
  experience?: string;
  format?: string;
  schedule?: string;
  description: string;
  requirements?: string;
}

declare global {
  interface Window {
    Telegram?: {
      WebApp: TelegramWebApp;
    };
  }
}

type Section = 'home' | 'articles' | 'cases' | 'vacancies' | 'events';

const carouselSlides: CarouselSlide[] = [
  {
    href: "https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18",
    image: "https://i.postimg.cc/bJqQWjv5/photo-2025-03-18-15-18-14.jpg",
    alt: "скам"
  },
  {
    href: "https://www.instagram.com/reel/DKHZPnYtjQD/?igsh=1234567890",
    image: "https://i.postimg.cc/Z57qjBRv/feat-mac.jpg",
    alt: "мак"
  }
];

const actualItems: ActualItem[] = [
  {
    id: "actual_1",
    href: "https://cpalenta.ru/keys-130-000-za-2-mesyatsa-s-aso-v-brazilii-na-privatnom-offere-thelimitedclub/",
    image: "https://i.postimg.cc/63LfsdTz/partners.jpg",
    title: "Отзывы партнеров",
    description: ""
  },
  {
    id: "actual_3",
    href: "https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18",
    image: "https://i.postimg.cc/X7KQS6B4/scam.jpg",
    title: "SCAM от AMERIO",
    description: ""
  },
  {
    id: "actual_4",
    href: "https://traffhub.media/articles/gambling/nyuansy-vybora-gembling-offerov/",
    image: "https://i.postimg.cc/kgyVJSnh/offer-2.jpg",
    title: "Нюансы выбора",
    description: ""
  }
];

const teamMembers: TeamMember[] = [
  {
    name: "Head of Affiliate",
    role: "",
    image: "https://i.postimg.cc/GmQ3z0Zt/6-new.webp",
    telegram: "https://t.me/D_limited"
  },
  {
    name: "Head of Sales",
    role: "",
    image: "https://i.postimg.cc/gkyGkFcs/2.webp",
    telegram: "https://t.me/sasha_limited"
  },
  {
    name: "Team Lead Affiliate Manager",
    role: "",
    image: "https://i.postimg.cc/SxDqC6Mz/1.webp",
    telegram: "https://t.me/ksu_limited"
  },
  {
    name: "HR",
    role: "",
    image: "https://i.postimg.cc/hGvnrXLZ/7.jpg",
    telegram: "https://t.me/arina_limitedclub"
  },
  {
    name: "Связь по PR и маркетингу",
    role: "",
    image: "https://i.postimg.cc/yNGHr7n1/5-new.webp",
    telegram: "https://t.me/Alexandr_limited"
  }
];

const vacancyData: Record<string, VacancyData> = {
  support_sales: {
    title: 'Support Manager Sales',
    experience: 'не требуется',
    format: 'Удалённо',
    schedule: '5/2, 8 часов',
    description: 'Помогать коллегам из отдела. Поддерживать и развивать отношения с партнёрами. Мониторить рынок и подключать лучшие офферы. Контролировать выплаты, составлять отчёты, следить за процессами.'
  },
  finance_manager: {
    title: 'Финансовый менеджер',
    experience: '1–3 года',
    format: 'Удалённо',
    schedule: '5/2, 8 часов',
    description: 'Взаимодействие и подготовка сверок для контрагентов. Расчеты с контрагентами по итогам итого месяца. Контроль кредиторской задолженности. Участие в расчете зарплат. Учет операций (включая криптовалюту). Составление финансовых отчетов.',
    requirements: 'Опыт в финансовом от 1 года. Уверенное владение MS Excel/Google Sheets. Навыки анализа данных и предложения решений. Организованность и соблюдение сроков.'
  },
  affiliate_manager: {
    title: 'Affiliate Manager',
    experience: '1–3 года',
    format: 'Удалённо',
    schedule: '5/2, 8 часов',
    description: 'Работа с командами-партнёрами, поддержка вебмастеров от подбора оффера до запуска трафика. Построение взаимовыгодного сотрудничества.',
    requirements: 'Опыт работы Affiliate Manager от 2 лет. Навыки коммуникации и индивидуального подхода к вебмастерам. Желание реализовать потенциал.'
  },
  pr_manager: {
    title: 'PR-менеджер',
    experience: '1–3 года',
    format: 'Удалённо',
    schedule: '5/2, 8 часов',
    description: 'Формирование PR-стратегии. Создание и распространение инфоповодов. Поддержка отношений с медиа. Участие в отраслевых мероприятиях. Работа с контентом и коммуникациями. Анализ PR-активностей.',
    requirements: 'Опыт в PR от 1 года. Навыки создания контента и анализа эффективности. Умение находить коллаборации.'
  }
};

export default function App() {
  const [activeSection, setActiveSection] = useState<Section>('home');
  const [currentSlide, setCurrentSlide] = useState(0);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [modalContent, setModalContent] = useState<any>(null);
  const [isGothicMode, setIsGothicMode] = useState(false);
  const [showBats, setShowBats] = useState(false);

  // Telegram WebApp initialization
  useEffect(() => {
    const tg = window.Telegram?.WebApp;
    if (tg) {
      tg.expand();
    }
  }, []);

  // Auto carousel
  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentSlide((prev) => (prev + 1) % carouselSlides.length);
    }, 3000);
    return () => clearInterval(interval);
  }, []);

  const openTelegramLink = useCallback((url: string) => {
    const tg = window.Telegram?.WebApp;
    if (/^https:\/\/t\.me\//.test(url) && tg) {
      tg.openLink(url);
    } else {
      window.open(url, '_blank');
    }
  }, []);

  const handleSectionChange = (section: Section) => {
    if (section === 'events' && activeSection !== 'events') {
      // Запускаем анимацию летучих мышей
      setShowBats(true);
      setTimeout(() => {
        setIsGothicMode(true);
        setActiveSection(section);
        setShowBats(false);
      }, 2500); // Увеличиваем время для более эффектного перехода
    } else if (section !== 'events' && activeSection === 'events') {
      // Выходим из готического режима
      setIsGothicMode(false);
      setActiveSection(section);
    } else {
      setActiveSection(section);
    }
    window.scrollTo(0, 0);
  };

  const openModal = (content: any) => {
    setModalContent(content);
    setIsModalOpen(true);
    document.body.style.overflow = 'hidden';
  };

  const closeModal = () => {
    setIsModalOpen(false);
    setModalContent(null);
    document.body.style.overflow = 'auto';
  };

  const MenuButton = ({ section, children, isEvents = false }: { section: Section; children: React.ReactNode; isEvents?: boolean }) => {
    if (isEvents) {
      return (
        <motion.li
          className={`
            relative px-4 py-2 cursor-pointer transition-all duration-500
            ${activeSection === section 
              ? 'russian-gothic-active' 
              : 'russian-gothic-inactive'
            }
            russian-gothic-button
          `}
          whileHover={{ scale: 1.08, rotateY: 2 }}
          whileTap={{ scale: 0.95 }}
          onClick={() => handleSectionChange(section)}
          style={{
            fontFamily: "'Cinzel', serif",
            position: 'relative',
            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 100%, 8px 100%)',
          }}
        >
          {/* Основной фон с градиентом в русской готике - красно-черный */}
          <motion.div
            className="absolute inset-0"
            style={{
              clipPath: 'inherit',
              background: 'linear-gradient(135deg, #1a0000 0%, #660000 25%, #cc0000 50%, #660000 75%, #1a0000 100%)',
            }}
            animate={{
              background: activeSection === section 
                ? [
                    'linear-gradient(135deg, #1a0000 0%, #660000 25%, #cc0000 50%, #660000 75%, #1a0000 100%)',
                    'linear-gradient(135deg, #2a0000 0%, #800000 25%, #ff0000 50%, #800000 75%, #2a0000 100%)',
                    'linear-gradient(135deg, #1a0000 0%, #660000 25%, #cc0000 50%, #660000 75%, #1a0000 100%)'
                  ]
                : 'linear-gradient(135deg, #0a0000 0%, #330000 25%, #4d0000 50%, #330000 75%, #0a0000 100%)',
            }}
            transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
          />
          
          {/* Орнаментальная рамка - красная */}
          <motion.div 
            className="absolute inset-0 border-2 border-red-500/60"
            style={{
              clipPath: 'inherit',
              borderImage: 'linear-gradient(45deg, #cc0000, #ff0000, #cc0000) 1',
              boxShadow: 'inset 0 0 15px rgba(204, 0, 0, 0.3), 0 0 20px rgba(204, 0, 0, 0.2)',
            }}
            animate={{
              boxShadow: activeSection === section 
                ? [
                    'inset 0 0 15px rgba(204, 0, 0, 0.3), 0 0 20px rgba(204, 0, 0, 0.2)',
                    'inset 0 0 25px rgba(255, 0, 0, 0.5), 0 0 30px rgba(255, 0, 0, 0.4)',
                    'inset 0 0 15px rgba(204, 0, 0, 0.3), 0 0 20px rgba(204, 0, 0, 0.2)'
                  ]
                : 'inset 0 0 10px rgba(77, 0, 0, 0.2), 0 0 10px rgba(77, 0, 0, 0.1)',
            }}
            transition={{ duration: 1.5, repeat: Infinity, ease: "easeInOut" }}
          />

          {/* Декоративные угловые элементы в готическом стиле */}
          <motion.div
            className="absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-red-500"
            animate={{
              borderColor: activeSection === section ? '#ff0000' : '#4d0000',
            }}
          />
          <motion.div
            className="absolute top-0 right-0 w-3 h-3 border-r-2 border-t-2 border-red-500"
            animate={{
              borderColor: activeSection === section ? '#ff0000' : '#4d0000',
            }}
          />
          <motion.div
            className="absolute bottom-0 left-0 w-3 h-3 border-l-2 border-b-2 border-red-500"
            animate={{
              borderColor: activeSection === section ? '#ff0000' : '#4d0000',
            }}
          />
          <motion.div
            className="absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-red-500"
            animate={{
              borderColor: activeSection === section ? '#ff0000' : '#4d0000',
            }}
          />

          {/* Центральный орнамент - реалистичная летучая мышь */}
          <motion.div
            className="absolute top-1/2 left-1 transform -translate-y-1/2"
            animate={{
              scale: activeSection === section ? [1, 1.2, 1] : 1,
            }}
            transition={{ duration: 1, repeat: Infinity, ease: "easeInOut" }}
          >
            <RealisticBat 
              size={12} 
              color={activeSection === section ? '#ff0000' : '#4d0000'}
            />
          </motion.div>

          {/* Основной текст */}
          <span 
            className="relative z-10 text-red-200 font-bold text-sm tracking-wide"
            style={{
              textShadow: '0 0 10px rgba(204, 0, 0, 0.5), 0 0 20px rgba(204, 0, 0, 0.3)',
              filter: activeSection === section ? 'drop-shadow(0 0 8px #ff0000)' : 'drop-shadow(0 0 4px #4d0000)',
            }}
          >
            {children}
          </span>

          {/* Декоративная нижняя линия в виде орнамента */}
          <motion.div
            className="absolute bottom-0 left-1/2 transform -translate-x-1/2 h-0.5 bg-gradient-to-r from-transparent via-red-500 to-transparent"
            animate={{
              width: activeSection === section ? '90%' : '0%',
              background: activeSection === section 
                ? 'linear-gradient(to right, transparent, #ff0000, transparent)'
                : 'linear-gradient(to right, transparent, #4d0000, transparent)',
            }}
            transition={{ duration: 0.4 }}
          />

          {/* Мистический эффект свечения */}
          <motion.div
            className="absolute inset-0 pointer-events-none"
            style={{
              clipPath: 'inherit',
              background: 'radial-gradient(circle at center, transparent 60%, rgba(204, 0, 0, 0.1) 100%)',
            }}
            animate={{
              opacity: activeSection === section ? [0.3, 0.7, 0.3] : 0,
            }}
            transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
          />
        </motion.li>
      );
    }

    return (
      <li
        className={`
          px-3 py-1.5 rounded-md cursor-pointer transition-all duration-300
          ${activeSection === section 
            ? 'bg-[#d5fd02] text-[#080808]' 
            : 'text-gray-400 hover:bg-[#d5fd02] hover:text-[#080808]'
          }
        `}
        onClick={() => handleSectionChange(section)}
      >
        {children}
      </li>
    );
  };

  return (
    <div className={`min-h-screen text-white relative overflow-x-hidden transition-all duration-1000 ${
      isGothicMode ? 'bg-black' : 'bg-[#080808]'
    }`}>
      {/* Particles Background */}
      <div className="fixed inset-0 pointer-events-none">
        <div className={`absolute inset-0 transition-all duration-1000 ${
          isGothicMode 
            ? 'bg-gradient-to-br from-red-900/20 via-black to-red-900/20' 
            : 'bg-gradient-to-br from-transparent via-[#d5fd02]/5 to-transparent'
        }`}></div>
        {Array.from({ length: 50 }).map((_, i) => (
          <motion.div
            key={i}
            className={`absolute w-1 h-1 rounded-full transition-colors duration-1000 ${
              isGothicMode ? 'bg-red-500' : 'bg-[#d5fd02]'
            }`}
            style={{
              left: Math.random() * 100 + '%',
              top: Math.random() * 100 + '%',
            }}
            animate={{
              y: [-20, 20],
              x: [-10, 10],
              opacity: [0.3, 0.7, 0.3],
            }}
            transition={{
              duration: 3 + Math.random() * 2,
              repeat: Infinity,
              ease: "easeInOut",
              delay: Math.random() * 2,
            }}
          />
        ))}
      </div>

      {/* Flying Bats Animation - Realistic Swarm Effect */}
      <AnimatePresence>
        {showBats && (
          <div className="fixed inset-0 pointer-events-none z-50 bg-black/95">
            {/* Первая волна - слева направо */}
            {Array.from({ length: 25 }).map((_, i) => (
              <motion.div
                key={`left-${i}`}
                className="absolute"
                style={{
                  left: '-100px',
                  top: Math.random() * window.innerHeight,
                }}
                initial={{ x: -100, rotate: 0, scale: 0.8 }}
                animate={{ 
                  x: window.innerWidth + 100, 
                  rotate: [0, 15, -15, 10, -5, 0],
                  y: [0, -30, 40, -20, 10, 0],
                  scale: [0.8, 1.2, 0.9, 1.1, 0.8]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 2,
                  delay: i * 0.05,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={30 + Math.random() * 20} 
                  color={`rgb(${204 + Math.random() * 50}, ${Math.random() * 50}, ${Math.random() * 50})`}
                />
              </motion.div>
            ))}
            
            {/* Вторая волна - справа налево */}
            {Array.from({ length: 20 }).map((_, i) => (
              <motion.div
                key={`right-${i}`}
                className="absolute"
                style={{
                  right: '-80px',
                  top: Math.random() * window.innerHeight,
                }}
                initial={{ x: 80, rotate: 180, scale: 0.7 }}
                animate={{ 
                  x: -(window.innerWidth + 80), 
                  rotate: [180, 195, 165, 185, 170, 180],
                  y: [0, -25, 35, -15, 8, 0],
                  scale: [0.7, 1, 0.8, 0.9, 0.7]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 1.8,
                  delay: 0.3 + i * 0.04,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={25 + Math.random() * 15} 
                  color={`rgb(${139 + Math.random() * 60}, ${Math.random() * 30}, ${Math.random() * 30})`}
                />
              </motion.div>
            ))}
            
            {/* Третья волна - сверху вниз */}
            {Array.from({ length: 15 }).map((_, i) => (
              <motion.div
                key={`top-${i}`}
                className="absolute"
                style={{
                  left: Math.random() * window.innerWidth,
                  top: '-100px',
                }}
                initial={{ y: -100, rotate: 90, scale: 1 }}
                animate={{ 
                  y: window.innerHeight + 100, 
                  rotate: [90, 105, 75, 95, 85, 90],
                  x: [0, -40, 60, -30, 20, 0],
                  scale: [1, 1.3, 0.9, 1.1, 1]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 1.6,
                  delay: 0.5 + i * 0.06,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={35 + Math.random() * 25} 
                  color={`rgb(${255}, ${Math.random() * 100}, ${Math.random() * 100})`}
                />
              </motion.div>
            ))}
            
            {/* Четвертая волна - снизу вверх */}
            {Array.from({ length: 12 }).map((_, i) => (
              <motion.div
                key={`bottom-${i}`}
                className="absolute"
                style={{
                  left: Math.random() * window.innerWidth,
                  bottom: '-80px',
                }}
                initial={{ y: 80, rotate: -90, scale: 0.9 }}
                animate={{ 
                  y: -(window.innerHeight + 80), 
                  rotate: [-90, -75, -105, -85, -95, -90],
                  x: [0, 50, -70, 40, -25, 0],
                  scale: [0.9, 1.4, 0.8, 1.2, 0.9]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 1.7,
                  delay: 0.8 + i * 0.07,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={28 + Math.random() * 18} 
                  color={`rgb(${204 + Math.random() * 50}, ${Math.random() * 50}, ${Math.random() * 50})`}
                />
              </motion.div>
            ))}

            {/* Центральная волна - хаотичное движение */}
            {Array.from({ length: 18 }).map((_, i) => (
              <motion.div
                key={`center-${i}`}
                className="absolute"
                style={{
                  left: Math.random() * window.innerWidth,
                  top: Math.random() * window.innerHeight,
                }}
                initial={{ scale: 0, rotate: 0 }}
                animate={{ 
                  scale: [0, 1.5, 0.8, 1.2, 0], 
                  rotate: [0, 360, -180, 270, 0],
                  x: [0, Math.random() * 200 - 100, Math.random() * 300 - 150, Math.random() * 150 - 75, 0],
                  y: [0, Math.random() * 200 - 100, Math.random() * 300 - 150, Math.random() * 150 - 75, 0]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 1.5,
                  delay: 0.2 + i * 0.03,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={40 + Math.random() * 30} 
                  color={`rgb(${255}, ${Math.random() * 150}, ${Math.random() * 150})`}
                />
              </motion.div>
            ))}

            {/* Дополнительные мыши для плотности */}
            {Array.from({ length: 30 }).map((_, i) => (
              <motion.div
                key={`dense-${i}`}
                className="absolute"
                style={{
                  left: Math.random() * window.innerWidth,
                  top: Math.random() * window.innerHeight,
                }}
                initial={{ scale: 0, opacity: 0 }}
                animate={{ 
                  scale: [0, 1, 0.8, 1.1, 0], 
                  opacity: [0, 1, 0.8, 0.6, 0],
                  rotate: [0, Math.random() * 720 - 360],
                  x: [0, (Math.random() - 0.5) * 400],
                  y: [0, (Math.random() - 0.5) * 400]
                }}
                exit={{ opacity: 0 }}
                transition={{
                  duration: 2.5,
                  delay: i * 0.02,
                  ease: "easeInOut"
                }}
              >
                <RealisticBat 
                  size={20 + Math.random() * 15} 
                  color={`rgb(${180 + Math.random() * 75}, ${Math.random() * 80}, ${Math.random() * 80})`}
                />
              </motion.div>
            ))}
          </div>
        )}
      </AnimatePresence>

      {/* Top Menu - Hide in Gothic Mode */}
      <AnimatePresence>
        {!isGothicMode && (
          <motion.header 
            className="flex justify-between items-center p-4"
            initial={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -50 }}
            transition={{ duration: 0.5 }}
          >
            <img 
              className="w-25 h-auto" 
              src="https://i.postimg.cc/90gRT1n1/Frame-2.png" 
              alt="TMA Logo" 
            />
            <div className="flex items-center gap-2">
              <span className="text-xs text-gray-400">Наши соцсети</span>
              <button
                onClick={() => openTelegramLink("https://t.me/limitedclubcpa")}
                className="text-[#d5fd02] hover:text-[#b8e002] transition-colors duration-300 hover:scale-110 transform"
              >
                <i className="fab fa-telegram-plane text-base"></i>
              </button>
              <a
                href="https://www.instagram.com/thelimitedclub.cpa?igsh=MXkwcXppMWtlZGtm"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#d5fd02] hover:text-[#b8e002] transition-colors duration-300 hover:scale-110 transform"
              >
                <i className="fab fa-instagram text-base"></i>
              </a>
            </div>
          </motion.header>
        )}
      </AnimatePresence>

      {/* Carousel - Hide in Gothic Mode */}
      <AnimatePresence>
        {!isGothicMode && (
          <motion.div 
            className="relative w-[343px] h-[136px] mx-auto mb-2 rounded-md overflow-hidden bg-black max-w-full"
            initial={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.8 }}
            transition={{ duration: 0.5 }}
          >
            <AnimatePresence mode="wait">
              {carouselSlides.map((slide, index) => (
                index === currentSlide && (
                  <motion.a
                    key={index}
                    href={slide.href}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="absolute inset-0 block"
                    initial={{ opacity: 0, scale: 1 }}
                    animate={{ opacity: 1, scale: 1.02 }}
                    exit={{ opacity: 0, scale: 1 }}
                    transition={{ duration: 0.5 }}
                  >
                    <img 
                      src={slide.image} 
                      alt={slide.alt}
                      className="w-full h-full object-cover"
                    />
                  </motion.a>
                )
              ))}
            </AnimatePresence>
            
            <div className="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-1 z-10">
              {carouselSlides.map((_, index) => (
                <button
                  key={index}
                  className={`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${
                    index === currentSlide ? 'bg-[#d5fd02]' : 'bg-white/30'
                  }`}
                  onClick={() => setCurrentSlide(index)}
                />
              ))}
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Navigation Menu - Enhanced Gothic Mode */}
      <nav className={`sticky z-40 transition-all duration-1000 ${
        isGothicMode 
          ? 'top-0 bg-gradient-to-r from-black via-red-950/30 to-black border-b-2 border-red-600/50 py-4 shadow-lg shadow-red-900/50' 
          : 'top-0 bg-[#080808] py-1.5'
      }`}>
        <div className="flex justify-center">
          {isGothicMode && (
            <motion.div
              className="absolute inset-0 bg-gradient-to-r from-transparent via-red-900/20 to-transparent"
              animate={{
                opacity: [0.3, 0.7, 0.3],
              }}
              transition={{ duration: 3, repeat: Infinity, ease: "easeInOut" }}
            />
          )}
          <motion.ul 
            className="inline-flex gap-2.5 px-4 overflow-x-auto whitespace-nowrap scroll-smooth relative z-10"
            animate={isGothicMode ? {
              scale: [1, 1.05, 1],
            } : {}}
            transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
          >
            <MenuButton section="home">Главная</MenuButton>
            <MenuButton section="articles">Статьи</MenuButton>
            <MenuButton section="cases">Кейсы</MenuButton>
            <MenuButton section="vacancies">Вакансии</MenuButton>
            <MenuButton section="events" isEvents={true}>
              <div className="flex items-center gap-1">
                <RealisticBat size={16} color="currentColor" />
                <span>Мероприятия</span>
              </div>
            </MenuButton>
          </motion.ul>
          
          {/* Gothic corner ornaments */}
          {isGothicMode && (
            <>
              <motion.div
                className="absolute top-2 left-4"
                animate={{
                  rotate: [0, 10, -10, 0],
                  scale: [1, 1.2, 1],
                }}
                transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
              >
                <RealisticBat size={20} color="#dc2626" />
              </motion.div>
              <motion.div
                className="absolute top-2 right-4"
                animate={{
                  rotate: [0, -10, 10, 0],
                  scale: [1, 1.2, 1],
                }}
                transition={{ duration: 2, repeat: Infinity, ease: "easeInOut", delay: 1 }}
              >
                <RealisticBat size={20} color="#dc2626" />
              </motion.div>
            </>
          )}
        </div>
      </nav>

      {/* Page Content */}
      <main className={`px-4 pb-8 transition-all duration-1000 ${
        isGothicMode ? 'pt-8' : ''
      }`}>
        <AnimatePresence mode="wait">
          <motion.section
            key={activeSection}
            initial={{ opacity: 0, x: 300 }}
            animate={{ opacity: 1, x: 0 }}
            exit={{ opacity: 0, x: -300 }}
            transition={{ duration: 0.4, ease: "easeInOut" }}
            className="min-h-24"
          >
            {activeSection === 'home' && <HomeSection />}
            {activeSection === 'articles' && <ArticlesSection />}
            {activeSection === 'cases' && <CasesSection />}
            {activeSection === 'vacancies' && <VacanciesSection openModal={openModal} openTelegramLink={openTelegramLink} />}
            {activeSection === 'events' && <EventsSection openModal={openModal} />}
          </motion.section>
        </AnimatePresence>
      </main>

      {/* Modal */}
      <AnimatePresence>
        {isModalOpen && (
          <motion.div
            className="fixed inset-0 z-50 flex items-center justify-center"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
          >
            <motion.div
              className="absolute inset-0 bg-black/80 backdrop-blur-sm"
              onClick={closeModal}
            />
            <motion.div
              className="relative bg-gradient-to-br from-[#111315]/90 to-[#222]/70 backdrop-blur-xl border border-[#d5fd02]/40 rounded-2xl p-4 max-w-[95%] min-w-[300px] max-h-[98vh] overflow-y-auto"
              initial={{ scale: 0.7, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              exit={{ scale: 0.7, opacity: 0 }}
              transition={{ type: "spring", damping: 25, stiffness: 300 }}
            >
              {modalContent}
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Font Awesome and Russian Gothic Fonts */}
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
      <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Old+Standard+TT:wght@400;700&display=swap" rel="stylesheet" />
      
      <style jsx>{`
        .russian-gothic-button {
          font-family: 'Cinzel', serif;
          position: relative;
          overflow: hidden;
        }
        
        .russian-gothic-active {
          color: #ff0000;
          text-shadow: 0 0 15px rgba(255, 0, 0, 0.8), 0 0 25px rgba(204, 0, 0, 0.5);
        }
        
        .russian-gothic-inactive {
          color: #4d0000;
          text-shadow: 0 0 8px rgba(77, 0, 0, 0.4);
        }
        
        .russian-gothic-button:before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(204, 0, 0, 0.3), transparent);
          transition: left 0.8s ease;
        }
        
        .russian-gothic-button:hover:before {
          left: 100%;
        }
        
        .bg-gradient-radial {
          background: radial-gradient(circle, var(--tw-gradient-stops));
        }
      `}</style>
    </div>
  );

  function HomeSection() {
    return (
      <div>
        <h2 className="text-2xl text-[#d5fd02] mb-4">АКТУАЛЬНОЕ</h2>
        
        {/* Actual Items Carousel */}
        <div className="mb-4 overflow-hidden">
          <div className="flex gap-3 px-4 overflow-x-auto pb-2">
            {actualItems.map((item, index) => (
              <motion.a
                key={item.id}
                href={item.href}
                target="_blank"
                rel="noopener noreferrer"
                className="flex-shrink-0 w-[140px] block"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: index * 0.1 }}
                whileHover={{ scale: 1.03 }}
              >
                <div className="bg-[#111315] border border-[#222] rounded-xl overflow-hidden hover:shadow-lg hover:shadow-[#d5fd02]/40 transition-all duration-300">
                  <img 
                    src={item.image}
                    alt={item.title}
                    className="w-full h-[120px] object-cover"
                  />
                  <div className="absolute bottom-0 left-0 right-0 bg-black/70 p-1.5">
                    <p className="text-white text-xs mb-1">{item.title}</p>
                    {item.description && <p className="text-gray-300 text-xs">{item.description}</p>}
                  </div>
                </div>
              </motion.a>
            ))}
          </div>
        </div>

        {/* Promo Card */}
        <motion.div
          className="bg-gradient-to-r from-[#d5fd02] to-[#b8e022] p-3 h-12 text-center rounded-2xl cursor-pointer mb-4 flex items-center justify-center gap-2 shadow-lg shadow-[#d5fd02]/50"
          whileHover={{ scale: 1.05, boxShadow: '0 12px 32px rgba(213, 253, 2, 0.7)' }}
          whileTap={{ scale: 0.95 }}
          onClick={() => openModal(
            <div className="text-white">
              <h3 className="text-[#d5fd02] mb-3">The Limited Club</h3>
              <p className="text-sm text-gray-300 mb-4">
                Это не просто партнёрская сеть, это закрытый клуб для сильнейших команд. 
                Мы обеспечиваем максимум. Забудь про заспамленные паблики и посредников. 
                У нас — прямые рекламодатели, эксклюзивные офферы и условия, о которых другие сети не говорят.
              </p>
              <div className="space-y-2">
                <button
                  className="w-full bg-[#d5fd02] text-[#080808] p-2 rounded-md font-medium hover:bg-[#b8e002] transition-colors"
                  onClick={() => openTelegramLink("https://t.me/Nick_Limited")}
                >
                  <i className="fab fa-telegram-plane mr-2"></i>как рекламодатель
                </button>
                <button
                  className="w-full bg-[#d5fd02] text-[#080808] p-2 rounded-md font-medium hover:bg-[#b8e002] transition-colors"
                  onClick={() => openTelegramLink("https://t.me/D_limited")}
                >
                  <i className="fab fa-telegram-plane mr-2"></i>как веб-мастер
                </button>
                <button
                  className="w-full bg-[#222] text-white p-2 rounded-md font-medium hover:bg-[#333] transition-colors"
                  onClick={closeModal}
                >
                  <i className="fas fa-times mr-2"></i>Закрыть
                </button>
              </div>
            </div>
          )}
        >
          <i className="fas fa-handshake text-[#080808]"></i>
          <span className="text-[#080808] font-bold">Начать сотрудничество</span>
        </motion.div>

        <h2 className="text-2xl text-[#d5fd02] mb-4">КОМАНДА</h2>
        
        {/* Team Carousel */}
        <div className="overflow-hidden">
          <div className="flex gap-3 px-4 overflow-x-auto pb-2">
            {teamMembers.map((member, index) => (
              <motion.button
                key={index}
                className="flex-shrink-0 w-[140px] p-2 text-center hover:scale-105 transition-transform duration-300"
                onClick={() => openTelegramLink(member.telegram)}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: index * 0.1 }}
              >
                <img 
                  src={member.image}
                  alt={member.name}
                  className="w-12 h-12 object-cover rounded-full mx-auto mb-2"
                />
                <p className="text-white text-xs mb-1">{member.name}</p>
                {member.role && <p className="text-gray-400 text-xs">{member.role}</p>}
              </motion.button>
            ))}
          </div>
        </div>
      </div>
    );
  }

  function ArticlesSection() {
    const articles = [
      {
        href: "https://telegra.ph/Kak-podnyat-kachestvo-trafika-v-gemblinge-neskolko-prakticheskih-mehanik-04-09",
        image: "https://i.postimg.cc/JzZmWnct/quality.jpg",
        title: "Качество трафика",
        description: "Несколько практических механик"
      },
      {
        href: "https://www.instagram.com/p/DCOei_ItMsf/?igsh=YzFudTVhbGlteGJr",
        image: "https://i.postimg.cc/63LfsdTz/partners.jpg",
        title: "Отзывы партнеров",
        description: "Наш опыт работы"
      },
      {
        href: "https://traffhub.media/articles/gambling/nyuansy-vybora-gembling-offerov/",
        image: "https://i.postimg.cc/q77T6LH6/offer.jpg",
        title: "Нюансы выбора офферов",
        description: "Советы по гемблингу"
      }
    ];

    return (
      <div>
        <h2 className="text-2xl text-[#d5fd02] mb-4">СТАТЬИ</h2>
        <div className="grid grid-cols-2 gap-3">
          {articles.map((article, index) => (
            <motion.a
              key={index}
              href={article.href}
              target="_blank"
              rel="noopener noreferrer"
              className="bg-[#111315] border border-[#222] rounded-xl overflow-hidden hover:scale-105 hover:shadow-lg hover:shadow-[#d5fd02]/40 transition-all duration-300"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
            >
              <img 
                src={article.image}
                alt={article.title}
                className="w-full h-[120px] object-cover"
              />
              <div className="absolute bottom-0 left-0 right-0 bg-black/70 p-1.5">
                <p className="text-white text-xs mb-1">{article.title}</p>
                <p className="text-gray-300 text-xs">{article.description}</p>
              </div>
            </motion.a>
          ))}
        </div>
      </div>
    );
  }

  function CasesSection() {
    const cases = [
      {
        href: "https://cpalenta.ru/keys-130-000-za-2-mesyatsa-s-aso-v-brazilii-na-privatnom-offere-thelimitedclub/",
        image: "https://i.postimg.cc/7PGWRRNZ/130k.jpg",
        title: "Гемблинг кейс: $130,000+",
        description: "Заработок за 2 месяца"
      },
      {
        href: "https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18",
        image: "https://i.postimg.cc/X7KQS6B4/scam.jpg",
        title: "SCAM кейс от AMERIO.BET",
        description: "Хронология и пруфы"
      }
    ];

    return (
      <div>
        <h2 className="text-2xl text-[#d5fd02] mb-4">КЕЙСЫ</h2>
        <div className="grid grid-cols-2 gap-3">
          {cases.map((caseItem, index) => (
            <motion.a
              key={index}
              href={caseItem.href}
              target="_blank"
              rel="noopener noreferrer"
              className="bg-[#111315] border border-[#222] rounded-xl overflow-hidden hover:scale-105 hover:shadow-lg hover:shadow-[#d5fd02]/40 transition-all duration-300"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
            >
              <img 
                src={caseItem.image}
                alt={caseItem.title}
                className="w-full h-[120px] object-cover"
              />
              <div className="absolute bottom-0 left-0 right-0 bg-black/70 p-1.5">
                <p className="text-white text-xs mb-1">{caseItem.title}</p>
                <p className="text-gray-300 text-xs">{caseItem.description}</p>
              </div>
            </motion.a>
          ))}
        </div>
      </div>
    );
  }

  function VacanciesSection({ openModal, openTelegramLink }: { openModal: (content: any) => void, openTelegramLink: (url: string) => void }) {
    const vacancies = [
      { id: 'support_sales', title: 'Support Manager Sales', exp: 'не требуется', format: 'Удалённо', schedule: '5/2, 8 часов' },
      { id: 'finance_manager', title: 'Финансовый менеджер', exp: '1–3 года', format: 'Удалённо', schedule: '5/2, 8 часов' },
      { id: 'affiliate_manager', title: 'Affiliate Manager', exp: '1–3 года', format: 'Удалённо', schedule: '5/2, 8 часов' },
      { id: 'pr_manager', title: 'PR-менеджер', exp: '1–3 года', format: 'Удалённо', schedule: '5/2, 8 часов' }
    ];

    return (
      <div>
        <h2 className="text-2xl text-[#d5fd02] mb-4">ВАКАНСИИ</h2>
        <div className="grid grid-cols-2 gap-3">
          {vacancies.map((vacancy, index) => (
            <motion.div
              key={vacancy.id}
              className="bg-gradient-to-br from-[#111315]/50 to-[#222]/30 backdrop-blur-md border border-[#d5fd02]/30 rounded-xl p-3 cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-[#d5fd02]/30 transition-all duration-300"
              onClick={() => {
                const data = vacancyData[vacancy.id];
                openModal(
                  <div className="text-white">
                    <h3 className="text-[#d5fd02] mb-3">{data.title}</h3>
                    <p className="text-sm text-gray-300 mb-2">{data.description}</p>
                    {data.requirements && (
                      <p className="text-sm text-gray-300 mb-4">
                        <strong>Наши ожидания:</strong><br />{data.requirements}
                      </p>
                    )}
                    <div className="space-y-2">
                      <button
                        className="w-full bg-[#d5fd02] text-[#080808] p-2 rounded-md font-medium hover:bg-[#b8e002] transition-colors"
                        onClick={() => openTelegramLink("https://t.me/arina_limitedclub")}
                      >
                        <i className="fab fa-telegram-plane mr-2"></i>Связаться с HR
                      </button>
                      <button
                        className="w-full bg-[#222] text-white p-2 rounded-md font-medium hover:bg-[#333] transition-colors"
                        onClick={closeModal}
                      >
                        <i className="fas fa-times mr-2"></i>Закрыть
                      </button>
                    </div>
                  </div>
                );
              }}
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: index * 0.1 }}
            >
              <h3 className="text-white text-sm mb-2">{vacancy.title}</h3>
              <p className="text-gray-400 text-xs">Опыт: {vacancy.exp}</p>
              <p className="text-gray-400 text-xs">Формат: {vacancy.format}</p>
              <p className="text-gray-400 text-xs">График: {vacancy.schedule}</p>
            </motion.div>
          ))}
          
          <motion.div
            className="col-span-2 bg-gradient-to-r from-[#d5fd02] to-[#b8e022] p-3 h-12 text-center rounded-2xl cursor-pointer flex items-center justify-center gap-2 shadow-lg shadow-[#d5fd02]/50"
            whileHover={{ scale: 1.05, boxShadow: '0 12px 32px rgba(213, 253, 2, 0.7)' }}
            whileTap={{ scale: 0.95 }}
            onClick={() => openTelegramLink("https://t.me/arina_limitedclub")}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.4 }}
          >
            <i className="fab fa-telegram-plane text-[#080808]"></i>
            <span className="text-[#080808] font-bold">Связаться с HR</span>
          </motion.div>
        </div>
      </div>
    );
  }

  function EventsSection({ openModal }: { openModal: (content: any) => void }) {
    const [showTitle, setShowTitle] = useState(false);
    const [showQuill, setShowQuill] = useState(false);
    const [quillPosition, setQuillPosition] = useState({ x: 50, y: 100 });

    useEffect(() => {
      const timer = setTimeout(() => {
        setShowTitle(true);
        setShowQuill(true);
      }, 500);

      return () => clearTimeout(timer);
    }, []);

    return (
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        className="relative"
      >
        {/* Russian Gothic Background - темно-красный */}
        <div className="absolute inset-0">
          <div className="w-full h-full bg-gradient-to-b from-red-950/30 via-black to-red-950/30"></div>
          <div className="absolute inset-0 bg-gradient-radial from-red-600/10 via-transparent to-transparent"></div>
          
          {/* Flying ornamental bats */}
          {Array.from({ length: 8 }).map((_, i) => (
            <motion.div
              key={i}
              className="absolute opacity-20"
              style={{
                left: Math.random() * 100 + '%',
                top: Math.random() * 100 + '%',
              }}
              animate={{
                x: [0, Math.random() * 100 - 50],
                y: [0, Math.random() * 100 - 50],
                rotate: [0, 360],
              }}
              transition={{
                duration: 15 + Math.random() * 10,
                repeat: Infinity,
                ease: "linear",
                delay: i * 2,
              }}
            >
              <RealisticBat size={15 + Math.random() * 10} color="#4d0000" />
            </motion.div>
          ))}
        </div>

        <div className="relative z-10">
          {/* Quill Pen Animation */}
          <QuillPen isWriting={showQuill} x={quillPosition.x} y={quillPosition.y} />
          
          <motion.div 
            className="text-3xl text-red-400 mb-6 text-center font-bold tracking-wide flex items-center justify-center gap-3"
            style={{ 
              fontFamily: "'Cinzel', serif", 
              textShadow: '0 0 20px rgba(220, 20, 60, 0.8), 0 0 40px rgba(220, 20, 60, 0.4)',
              letterSpacing: '2px'
            }}
            initial={{ y: -20, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ delay: 0.2 }}
          >
            <RealisticBat size={30} color="#dc2626" />
            <TypewriterText 
              text="ТЁМНОЕ МЕРОПРИЯТИЕ"
              delay={800}
              speed={100}
              onComplete={() => setShowQuill(false)}
            />
            <RealisticBat size={30} color="#dc2626" />
          </motion.div>

          {/* Main Event Card - Dark Gothic Style */}
          <motion.div
            className="relative overflow-hidden mb-6"
            initial={{ scale: 0.9, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            transition={{ delay: 0.3, type: "spring", damping: 20 }}
            style={{
              background: 'linear-gradient(135deg, #0a0000 0%, #1a0000 25%, #330000 50%, #1a0000 75%, #0a0000 100%)',
              border: '3px solid #cc0000',
              borderRadius: '0',
              clipPath: 'polygon(0 0, calc(100% - 20px) 0, 100% 20px, 100% 100%, 20px 100%, 0 calc(100% - 20px))',
              boxShadow: '0 0 30px rgba(204, 0, 0, 0.5), inset 0 0 30px rgba(204, 0, 0, 0.2)',
            }}
            whileHover={{ 
              scale: 1.02,
              boxShadow: '0 0 50px rgba(204, 0, 0, 0.7), inset 0 0 50px rgba(204, 0, 0, 0.3)',
            }}
          >
            {/* Ornamental Border */}
            <div 
              className="absolute inset-2 border-2 border-red-600/60"
              style={{
                clipPath: 'polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px))',
              }}
            />

            {/* Corner Ornaments - реалистичные летучие мыши */}
            <motion.div 
              className="absolute top-3 left-3"
              animate={{ rotate: [0, 10, -10, 0] }}
              transition={{ duration: 3, repeat: Infinity, ease: "easeInOut" }}
            >
              <RealisticBat size={18} color="#ef4444" />
            </motion.div>
            <motion.div 
              className="absolute top-3 right-3"
              animate={{ rotate: [0, -10, 10, 0] }}
              transition={{ duration: 3, repeat: Infinity, ease: "easeInOut", delay: 0.5 }}
            >
              <RealisticBat size={18} color="#ef4444" />
            </motion.div>
            <motion.div 
              className="absolute bottom-3 left-3"
              animate={{ rotate: [0, 10, -10, 0] }}
              transition={{ duration: 3, repeat: Infinity, ease: "easeInOut", delay: 1 }}
            >
              <RealisticBat size={18} color="#ef4444" />
            </motion.div>
            <motion.div 
              className="absolute bottom-3 right-3"
              animate={{ rotate: [0, -10, 10, 0] }}
              transition={{ duration: 3, repeat: Infinity, ease: "easeInOut", delay: 1.5 }}
            >
              <RealisticBat size={18} color="#ef4444" />
            </motion.div>

            <div className="relative h-[200px] overflow-hidden m-4"
                 style={{
                   clipPath: 'polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px))',
                 }}>
              <motion.img 
                src="https://images.unsplash.com/photo-1667848866710-37e95c4431ba?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxkYXJrJ20%2B2wZ290aGljJTIwY2FzdGxlJTIwcmVkJTIwYmxhY2t8ZW58MXx8fHwxNzU4NTEyMTc0fDA&ixlib=rb-4.0.3&q=80&w=1080&utm_source=figma&utm_medium=referral"
                alt="Тёмный готический замок"
                className="w-full h-full object-cover"
                initial={{ scale: 1.1 }}
                animate={{ scale: 1 }}
                transition={{ duration: 0.6 }}
              />
              <div className="absolute inset-0 bg-gradient-to-t from-black/95 via-red-950/40 to-transparent"></div>
              
              {/* Central Bat Symbol */}
              <motion.div
                className="absolute top-4 right-4"
                animate={{ 
                  rotate: [0, 5, -5, 0],
                  scale: [1, 1.1, 1]
                }}
                transition={{ duration: 2, repeat: Infinity, ease: "easeInOut" }}
                style={{ 
                  filter: 'drop-shadow(0 0 10px rgba(220, 20, 60, 0.8)) drop-shadow(0 0 20px rgba(255, 0, 0, 1))'
                }}
              >
                <RealisticBat size={35} color="#f87171" />
              </motion.div>
            </div>

            <div className="p-6">
              <motion.div 
                className="text-center mb-4"
                initial={{ y: 20, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ delay: 1.5 }}
              >
                <div className="flex items-center justify-center gap-2 mb-2">
                  <RealisticBat size={20} color="#fca5a5" />
                  <TypewriterText
                    text="«НОЧНАЯ ВСТРЕЧА»"
                    delay={2000}
                    speed={80}
                    className="text-xl text-red-300 font-bold tracking-wide"
                    style={{ 
                      fontFamily: "'Cinzel', serif", 
                      letterSpacing: '1.5px',
                      textShadow: '0 0 15px rgba(220, 20, 60, 0.8)'
                    }}
                  />
                  <RealisticBat size={20} color="#fca5a5" />
                </div>
                <TypewriterText
                  text="The Limited Club"
                  delay={4000}
                  speed={100}
                  className="text-base text-red-400"
                  style={{ fontFamily: "'Cinzel', serif" }}
                />
              </motion.div>
              
              <motion.div 
                className="text-red-100 text-sm mb-4 leading-relaxed text-center"
                initial={{ y: 20, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ delay: 5500 }}
                style={{ fontFamily: "'Cinzel', serif" }}
              >
                <TypewriterText
                  text="Приглашаем вас на эксклюзивное мероприятие в готическом стиле! Это тёмная встреча, где лучшие арбитражники соберутся в атмосфере мистики и элегантности. В программе: секретные мастер-классы, нетворкинг в стиле вампирских балов, и презентация самых прибыльных офферов под покровом ночи."
                  delay={6000}
                  speed={30}
                />
              </motion.div>

              <motion.div 
                className="flex flex-wrap gap-2 mb-6 justify-center"
                initial={{ y: 20, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ delay: 11000 }}
              >
                <motion.span 
                  className="px-4 py-2 bg-red-950/30 text-red-200 text-xs border border-red-600/50 font-medium flex items-center gap-1"
                  style={{ 
                    fontFamily: "'Cinzel', serif",
                    clipPath: 'polygon(5px 0, 100% 0, calc(100% - 5px) 100%, 0 100%)'
                  }}
                  initial={{ scale: 0 }}
                  animate={{ scale: 1 }}
                  transition={{ delay: 12000, type: "spring" }}
                >
                  <span>🌙</span>
                  <TypewriterText text="31 октября 2025" delay={12500} speed={50} />
                </motion.span>
                <motion.span 
                  className="px-4 py-2 bg-red-950/30 text-red-200 text-xs border border-red-600/50 font-medium flex items-center gap-1"
                  style={{ 
                    fontFamily: "'Cinzel', serif",
                    clipPath: 'polygon(5px 0, 100% 0, calc(100% - 5px) 100%, 0 100%)'
                  }}
                  initial={{ scale: 0 }}
                  animate={{ scale: 1 }}
                  transition={{ delay: 13500, type: "spring" }}
                >
                  <span>🏰</span>
                  <TypewriterText text="Москва, Тёмный Замок" delay={14000} speed={50} />
                </motion.span>
                <motion.span 
                  className="px-4 py-2 bg-red-950/30 text-red-200 text-xs border border-red-600/50 font-medium flex items-center gap-1"
                  style={{ 
                    fontFamily: "'Cinzel', serif",
                    clipPath: 'polygon(5px 0, 100% 0, calc(100% - 5px) 100%, 0 100%)'
                  }}
                  initial={{ scale: 0 }}
                  animate={{ scale: 1 }}
                  transition={{ delay: 15500, type: "spring" }}
                >
                  <RealisticBat size={12} color="#fca5a5" />
                  <TypewriterText text="Закрытый клуб" delay={16000} speed={50} />
                </motion.span>
              </motion.div>

              <motion.button
                className="w-full py-4 px-6 font-bold text-sm tracking-wider relative overflow-hidden flex items-center justify-center gap-2"
                style={{
                  background: 'linear-gradient(135deg, #330000 0%, #cc0000 50%, #330000 100%)',
                  border: '2px solid #cc0000',
                  clipPath: 'polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px))',
                  color: '#ffcccc',
                  fontFamily: "'Cinzel', serif",
                  textShadow: '0 0 10px rgba(0, 0, 0, 0.5)',
                  boxShadow: '0 0 20px rgba(204, 0, 0, 0.4), inset 0 0 20px rgba(204, 0, 0, 0.2)',
                }}
                initial={{ y: 20, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ delay: 17000 }}
                onClick={() => openModal(
                  <div className="text-white">
                    <motion.h3 
                      className="text-red-300 mb-4 text-center text-xl font-bold flex items-center justify-center gap-2"
                      style={{ 
                        fontFamily: "'Cinzel', serif",
                        textShadow: '0 0 15px rgba(220, 20, 60, 0.8)',
                        letterSpacing: '1px'
                      }}
                      initial={{ scale: 0.9 }}
                      animate={{ scale: 1 }}
                    >
                      <RealisticBat size={24} color="#fca5a5" />
                      ВСТУПЛЕНИЕ В ТЁМНЫЙ КЛУБ
                      <RealisticBat size={24} color="#fca5a5" />
                    </motion.h3>
                    
                    <div className="space-y-4">
                      <div className="text-center p-4 bg-gradient-to-r from-red-950/40 to-black/40 border-2 border-red-600/30"
                           style={{
                             clipPath: 'polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px))',
                           }}>
                        <p className="text-sm text-red-200 mb-2 font-bold flex items-center justify-center gap-2" style={{ fontFamily: "'Cinzel', serif" }}>
                          <RealisticBat size={16} color="#fca5a5" />
                          «НОЧНАЯ ВСТРЕЧА THE LIMITED CLUB»
                          <RealisticBat size={16} color="#fca5a5" />
                        </p>
                        <p className="text-xs text-red-300 flex items-center justify-center gap-2">
                          <span>🌙</span>
                          <span>31 октября 2025 • Москва</span> 
                          <RealisticBat size={12} color="#fca5a5" />
                        </p>
                      </div>
                      
                      <form className="space-y-3">
                        <input 
                          type="text" 
                          placeholder="Ваше тёмное имя" 
                          className="w-full p-3 bg-black/70 border-2 border-red-600/30 text-red-100 placeholder-red-300/60 focus:border-red-400 focus:outline-none transition-colors"
                          style={{
                            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                            fontFamily: "'Cinzel', serif"
                          }}
                        />
                        <input 
                          type="email" 
                          placeholder="Магический Email" 
                          className="w-full p-3 bg-black/70 border-2 border-red-600/30 text-red-100 placeholder-red-300/60 focus:border-red-400 focus:outline-none transition-colors"
                          style={{
                            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                            fontFamily: "'Cinzel', serif"
                          }}
                        />
                        <input 
                          type="text" 
                          placeholder="Тёмный контакт (@username)" 
                          className="w-full p-3 bg-black/70 border-2 border-red-600/30 text-red-100 placeholder-red-300/60 focus:border-red-400 focus:outline-none transition-colors"
                          style={{
                            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                            fontFamily: "'Cinzel', serif"
                          }}
                        />
                        <select 
                          className="w-full p-3 bg-black/70 border-2 border-red-600/30 text-red-100 focus:border-red-400 focus:outline-none transition-colors"
                          style={{
                            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                            fontFamily: "'Cinzel', serif"
                          }}>
                          <option value="">Ваша тёмная сила в арбитраже</option>
                          <option value="novice">Неофит (менее 6 месяцев)</option>
                          <option value="junior">Адепт (6-12 месяцев)</option>
                          <option value="middle">Мастер Тьмы (1-3 года)</option>
                          <option value="senior">Лорд Арбитража (3+ года)</option>
                        </select>
                        <textarea 
                          placeholder="Расскажите о ваших тёмных достижениях..." 
                          rows={3}
                          className="w-full p-3 bg-black/70 border-2 border-red-600/30 text-red-100 placeholder-red-300/60 focus:border-red-400 focus:outline-none transition-colors resize-none"
                          style={{
                            clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                            fontFamily: "'Cinzel', serif"
                          }}
                        />
                        
                        <motion.button
                          type="submit"
                          className="w-full py-3 px-6 font-bold transition-all duration-300"
                          style={{
                            background: 'linear-gradient(135deg, #330000 0%, #cc0000 50%, #330000 100%)',
                            border: '2px solid #cc0000',
                            clipPath: 'polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px))',
                            color: '#ffcccc',
                            fontFamily: "'Cinzel', serif",
                            textShadow: '0 0 10px rgba(0, 0, 0, 0.5)',
                          }}
                          whileHover={{ scale: 1.02 }}
                          whileTap={{ scale: 0.98 }}
                        >
                          <RealisticBat size={20} color="currentColor" />
                          ПРИСОЕДИНИТЬСЯ К ТЬМЕ
                          <RealisticBat size={20} color="currentColor" />
                        </motion.button>
                      </form>
                      
                      <button
                        className="w-full py-2 px-4 font-medium transition-colors"
                        style={{
                          background: '#1a0000',
                          border: '1px solid #4d0000',
                          clipPath: 'polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px))',
                          color: '#cc6666',
                          fontFamily: "'Cinzel', serif"
                        }}
                        onClick={closeModal}
                      >
                        ✕ Отвергнуть тёмный призыв
                      </button>
                    </div>
                  </div>
                )}
                initial={{ y: 20, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ delay: 0.8 }}
                whileHover={{ 
                  boxShadow: '0 0 30px rgba(204, 0, 0, 0.6), inset 0 0 30px rgba(204, 0, 0, 0.3)',
                  y: -2
                }}
                whileTap={{ scale: 0.98 }}
              >
                <RealisticBat size={20} color="currentColor" />
                <TypewriterText text="ПОГРУЗИТЬСЯ ВО ТЬМУ" delay={17500} speed={80} />
                <RealisticBat size={20} color="currentColor" />
              </motion.button>
            </div>
          </motion.div>
        </div>
      </motion.div>
    );
  }
}
